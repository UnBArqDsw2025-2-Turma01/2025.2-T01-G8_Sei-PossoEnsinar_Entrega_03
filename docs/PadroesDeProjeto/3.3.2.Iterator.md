<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Padrão Comportamental: Iterator</title>
  <style>
    body {
      font-family: "Segoe UI", Roboto, Arial, sans-serif;
      line-height: 1.6;
      color: #222;
      margin: 40px;
      background-color: #fafafa;
    }
    h1, h2, h3 {
      color: #2b4d8f;
    }
    pre {
      background-color: #1e1e1e;
      color: #dcdcdc;
      padding: 15px;
      border-radius: 8px;
      overflow-x: auto;
    }
    code {
      font-family: Consolas, "Courier New", monospace;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
      margin-bottom: 20px;
    }
    table th, table td {
      border: 1px solid #ddd;
      padding: 8px;
      text-align: left;
    }
    table th {
      background-color: #f2f2f2;
    }
    img {
      max-width: 100%;
      border-radius: 8px;
      margin-top: 10px;
    }
    hr {
      border: 1px solid #ddd;
      margin: 40px 0;
    }
  </style>
</head>
<body>

  <h2>3.3.2. Padrão Comportamental: Iterator</h2>

  <h3>Introdução</h3>
  <p>O padrão comportamental <strong>Iterator</strong>, também conhecido como <strong>Cursor</strong>, tem como intuito fornecer um meio de acessar, sequencialmente, os elementos de um objeto agregado sem expor a sua representação subjacente [2]. Em outras palavras, ele retira a lógica de percorrimento da coleção e a encapsula em um objeto dedicado — o iterador —, permitindo que diferentes estruturas de dados sejam navegadas de forma uniforme e segura.</p>

  <p>O objetivo é isolar a lógica de travessia em um objeto independente, padronizando o acesso a qualquer coleção por meio de uma interface comum. Com isso, o Iterator:</p>

  <ul>
    <li>Possibilita múltiplos algoritmos de percorrimento sobre a mesma coleção;</li>
    <li>Permite percursos simultâneos e independentes, pois cada iterador mantém seu próprio estado;</li>
    <li>Facilita a introdução de novos tipos de iteração sem alterar a coleção nem o código cliente [1].</li>
  </ul>

  <p>O padrão Iterator oferece diversos benefícios no desenvolvimento de sistemas orientados a objetos, entre eles: [1]</p>

  <ul>
    <li><strong>Modularidade e coesão:</strong> promove o princípio da responsabilidade única ao separar a lógica de travessia das coleções e do código cliente.</li>
    <li><strong>Facilidade de extensão:</strong> segue o princípio aberto/fechado, permitindo novas coleções e iteradores sem modificar o código existente.</li>
    <li><strong>Iteração simultânea independente:</strong> possibilita percursos paralelos sobre a mesma coleção.</li>
    <li><strong>Controle flexível da iteração:</strong> permite interromper e retomar o processo de travessia.</li>
  </ul>

  <hr>

  <h3>Metodologia</h3>
  <p>Para a realização deste projeto, foi adotada uma abordagem estruturada, com o uso de ferramentas específicas voltadas para o desenvolvimento, documentação e validação do padrão Iterator.</p>

  <table>
    <thead>
      <tr>
        <th>Ferramenta</th>
        <th>Finalidade</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><strong>Draw.io</strong></td>
        <td>Elaboração do diagrama que representa a estrutura e a interação entre os elementos do padrão Iterator.</td>
      </tr>
      <tr>
        <td><strong>Visual Studio Code (VSCode)</strong></td>
        <td>Ambiente de desenvolvimento para escrita e depuração do código-fonte.</td>
      </tr>
      <tr>
        <td><strong>NestJS</strong></td>
        <td>Framework utilizado no desenvolvimento do backend, aplicando o padrão de projeto.</td>
      </tr>
      <tr>
        <td><strong>TypeScript</strong></td>
        <td>Linguagem de programação escolhida por sua tipagem estática e legibilidade.</td>
      </tr>
      <tr>
        <td><strong>YouTube</strong></td>
        <td>Utilizado para gravação e compartilhamento de vídeos demonstrativos da implementação.</td>
      </tr>
    </tbody>
  </table>

  <hr>

  <h3>Desenvolvimento</h3>
  <p>O desenvolvimento do projeto seguiu uma abordagem iterativa, com base nas obras <em>Design Patterns: Elements of Reusable Object-Oriented Software</em> (Gamma et al., 1995) e no artigo <em>Iterator</em> da plataforma Refactoring Guru.</p>

  <p><strong>Figura 1 - Design Patterns - Iterator Pattern Modelo</strong></p>
  <img src="images/design_patterns_iterator.png" alt="Diagrama de Modelo do Padrão Iterator">
  <p>Fonte: <a href="https://www.tutorialspoint.com/design_pattern/iterator_pattern.htm">tutorialspoint</a> (Acesso em: 24/10/2025)</p>

  <hr>

  <h3>Diagrama</h3>
  <p><strong>Figura 2 - Diagrama Iterator</strong></p>
  <img src="images/iterator_diagrama.png" alt="Diagrama Iterator">
  <p><strong>Autores:</strong> Maria Eduarda e Victor</p>

  <hr>

  <h3>Código</h3>

  <h4>iterator.interface.ts</h4>
  <pre><code>export interface Iterator&lt;T&gt; {
  hasNext(): boolean;
  next(): T | null;
}

export interface Aggregate&lt;T&gt; {
  createIterator(): Iterator&lt;T&gt;;
}
</code></pre>

  <h4>sessao-de-ensino.model.ts</h4>
  <pre><code>export class SessaoDeEnsino {
  id: number;
  titulo: string;
  materia: string;
  data: Date;
  horario: string;
  privacidade: string;
  status: string;
  avaliacao: number;

  constructor(id: number, titulo: string, materia: string, data: Date, horario: string) {
    this.id = id;
    this.titulo = titulo;
    this.materia = materia;
    this.data = data;
    this.horario = horario;
    this.status = 'Agendada';
    this.privacidade = 'Pública';
    this.avaliacao = 0;
  }

  showDetails(): string {
    const formattedDate = this.data.toLocaleDateString('pt-BR');
    return `[Sessão ${this.id}] ${this.titulo} - Matéria: ${this.materia}, Data: ${formattedDate} às ${this.horario}, Status: ${this.status}`;
  }
}
</code></pre>

  <h4>sessao-de-ensino.iterator.ts</h4>
  <pre><code>import { Iterator } from './iterator.interface';
import { SessaoDeEnsino } from './sessao-de-ensino.model';

export class SessaoDeEnsinoIterator implements Iterator&lt;SessaoDeEnsino&gt; {
  private index: number = 0;
  private readonly sessoes: SessaoDeEnsino[]; 

  constructor(sessoes: SessaoDeEnsino[]) {
    this.sessoes = sessoes;
  }

  hasNext(): boolean {
    return this.index &lt; this.sessoes.length;
  }

  next(): SessaoDeEnsino | null {
    if (this.hasNext()) {
      return this.sessoes[this.index++];
    }
    return null;
  }
}
</code></pre>

  <h4>calendario.model.ts</h4>
  <pre><code>import { SessaoDeEnsino } from './sessao-de-ensino.model';
import { SessaoDeEnsinoIterator } from './sessao-de-ensino.iterator';
import { Aggregate, Iterator } from './iterator.interface';

export class Calendario implements Aggregate&lt;SessaoDeEnsino&gt; {
  id: number;
  ano: number;
  mes: number;
  private sessoes: SessaoDeEnsino[] = []; 

  constructor(id: number, ano: number, mes: number) {
    this.id = id;
    this.ano = ano;
    this.mes = mes;
  }

  adicionarSessao(sessao: SessaoDeEnsino): void {
    console.log(`[Calendario] Agendando sessão: ${sessao.titulo}`);
    this.sessoes.push(sessao);
  }
  
  removerSessao(sessao: SessaoDeEnsino): void {
    const index = this.sessoes.findIndex(s =&gt; s.id === sessao.id);
    if (index &gt; -1) {
      this.sessoes.splice(index, 1);
      console.log(`[Calendario] Sessão ${sessao.titulo} removida.`);
    }
  }
  
  createIterator(): Iterator&lt;SessaoDeEnsino&gt; {
    return new SessaoDeEnsinoIterator(this.sessoes);
  }

  createFutureSessionsIterator(): Iterator&lt;SessaoDeEnsino&gt; {
    const now = new Date();
    const futureSessoes = this.sessoes.filter(s =&gt; s.data.getTime() &gt; now.getTime());
    console.log(`\n[Calendario] Criando Iterator com ${futureSessoes.length} sessões futuras.`);
    return new SessaoDeEnsinoIterator(futureSessoes);
  }
}
</code></pre>

  <h4>main.ts</h4>
  <pre><code>import { Calendario } from './calendario.model';
import { SessaoDeEnsino } from './sessao-de-ensino.model';
import { Iterator } from './iterator.interface';

function runIteratorDemo() {
  console.log('--- Configurando Calendário ---');
  const calendario2025 = new Calendario(1, 2025, 10);

  const s1 = new SessaoDeEnsino(1, 'Introdução ao Padrão Iterator', 'Padrões de Projeto', new Date(2025, 10, 26), '19:00');
  const s2 = new SessaoDeEnsino(2, 'Modelagem UML', 'Engenharia de Software', new Date(2025, 10, 27), '10:00');
  const s3 = new SessaoDeEnsino(3, 'Revisão de Expressões Lambda', 'Programação Avançada', new Date(2025, 9, 24), '14:00'); 
  const s4 = new SessaoDeEnsino(4, 'Técnicas de Monitoria Eficaz', 'Didática', new Date(2025, 11, 1), '17:00');

  calendario2025.adicionarSessao(s1);
  calendario2025.adicionarSessao(s2);
  calendario2025.adicionarSessao(s3);
  calendario2025.adicionarSessao(s4);

  console.log('\n======================================================');
  console.log('  1. PERCURSO TOTAL - Usando o Iterator Padrão (Tudo)');
  console.log('======================================================');

  const iteratorPadrao: Iterator&lt;SessaoDeEnsino&gt; = calendario2025.createIterator();
  
  while (iteratorPadrao.hasNext()) {
    const sessao = iteratorPadrao.next();
    if (sessao) {
      console.log(`[PADRÃO] ${sessao.showDetails()}`);
    }
  }

  console.log('\n======================================================');
  console.log('  2. PERCURSO FILTRADO - Usando um Iterator Especializado (Futuras)');
  console.log('======================================================');
  
  const iteratorFuturo: Iterator&lt;SessaoDeEnsino&gt; = calendario2025.createFutureSessionsIterator();
  
  while (iteratorFuturo.hasNext()) {
    const sessao = iteratorFuturo.next();
    if (sessao) {
      console.log(`[FUTURA] ${sessao.showDetails()}`);
    }
  }
}

runIteratorDemo();
</code></pre>

  <hr>

  <h3>Histórico de Versões</h3>

  <table>
    <thead>
      <tr>
        <th>Versão</th>
        <th>Data</th>
        <th>Descrição</th>
        <th>Autor(es)</th>
        <th>Revisor(es)</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><strong>1.0</strong></td>
        <td>24/10/2025</td>
        <td>Criação do documento, adição da introdução, metodologia e desenvolvimento.</td>
        <td>Maria Eduarda e Victor</td>
        <td>-</td>
      </tr>
    </tbody>
  </table>

</body>
</html>
