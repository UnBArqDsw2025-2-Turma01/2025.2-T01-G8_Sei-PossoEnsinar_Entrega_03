# 3.2.2 Bridge

## Introdução

O padrão Bridge (Ponte) é uma solução de design estrutural concebida para desacoplar uma abstração de sua implementação. O objetivo principal é garantir que tanto a lógica de alto nível (a abstração) quanto os detalhes operacionais de baixo nível (a implementação) possam ser desenvolvidos e modificados de forma completamente independente, sem que uma alteração em uma dimensão force modificações na outra.

Este padrão é a resposta arquitetônica para o problema da explosão combinatória de subclasses. Quando um sistema apresenta duas ou mais "dimensões de variação" ortogonais – por exemplo, tipos de materiais e formatos de exportação – a herança tradicional levaria à criação de uma subclasse para cada combinação possível (ex: MaterialPDF, MaterialTXT, etc.). O Bridge evita isso, estabelecendo uma relação de Composição entre a Abstração e a interface da Implementação, criando uma "ponte" flexível entre as duas hierarquias.

No nosso projeto, o Bridge é aplicado na funcionalidade de disponibilização de Material Didático, separando o conteúdo a ser compartilhado (a Abstração) da tecnologia de exportação (a Implementação).


**Princípios Fundamentais do Bridge:**

1. **Separação de Preocupações:** Isola o que o sistema faz (gerenciar o material) de como o sistema o faz (gerar o arquivo PDF ou TXT).
2. **Flexibilidade em Tempo de Execução:** Permite que o formato de arquivo (a implementação) associado a um Material seja alterado dinamicamente enquanto o sistema está rodando, utilizando o método setter.
3. **Princípio Aberto/Fechado (OCP):** O código existente (Material e Monitor) permanece fechado para modificações, mas o sistema é aberto para a extensão – basta adicionar novas subclasses de GeradorDeArquivo (ex: GeradorDOCX) sem alterar a hierarquia de Material.

-----

## Prós e Contras 

A aplicação do padrão Bridge na arquitetura do sistema de geração de Material Didático, separando a abstração (Material) da implementação (GeradorDeArquivo), traz um conjunto de vantagens e desvantagens.

### Prós
- **Desacoplamento de Abstração e Implementação**: Permite que a hierarquia de classes de conteúdo (Material) e a hierarquia de formatos de arquivo (GeradorDeArquivo) sejam alteradas e estendidas de forma totalmente independente.
- **Prevenção da Explosão de Subclasses**: Evita a necessidade de criar subclasses para cada combinação de Material com formato de arquivo (ex: MaterialPDF, MaterialTXT), mantendo a hierarquia limpa e gerenciável.
- **Cumprimento do Princípio Aberto/Fechado (OCP)**: O sistema é aberto para extensão (fácil adição de novos formatos de arquivo, como GeradorDOCX), mas fechado para modificação (o código de Material e MaterialDidatico não precisa ser alterado).
- **Flexibilidade em Tempo de Execução**: O objeto Material pode ter seu formato de exportação (GeradorPDF ou GeradorTXT) trocado dinamicamente em tempo de execução através do método setGerador().
- **Coerência e Princípio da Responsabilidade Única (SRP)**: As classes mantêm alta coesão: Material foca na gestão do conteúdo e dados, enquanto os Gerador... focam exclusivamente na lógica de formatação e salvamento do arquivo.

### Contras
- **Aumento da Complexidade Inicial**: Para um cenário simples, onde apenas um ou dois formatos de arquivo seriam necessários, introduzir duas hierarquias de classes (Abstração e Implementador) e a lógica de Composição pode ser um excesso de engenharia.
- **Maior Número de Classes**: O padrão exige a criação de uma interface Implementadora (GeradorDeArquivo) e uma classe Abstração base (Material), aumentando o número total de classes no projeto em comparação com uma solução simples de herança.
- **Curva de Aprendizado para Desenvolvedores**: A separação explícita entre Abstração e Implementação, ligadas por Composição e Delegação, pode ser menos intuitiva de entender e manter inicialmente do que um simples encadeamento de herança.
- **Esforço na Configuração**: O Cliente (Monitor) precisa configurar explicitamente qual Implementador (ex: instanciar GeradorPDF) será usado e passá-lo para o Material via setGerador(), em vez de simplesmente criar o objeto desejado diretamente.

-----

## Metodologia

Para a documentação e desenvolvimento desse projeto, utilizamos um conjunto de tecnologias e ferramentas, sendo elas:

- **Draw.io:** Utilizado para o desenvolvimento e criação dos diagramas.
- **VSCode:** Utilizado para o desenvolvimento do código.
- **YouTube:** Utilizado para a postagem e gravação dos vídeos de explicação do código que foi implementado e apresentação do projeto.

A aplicação e documentação do padrão Bridge foram guiadas por um processo de design focado na modularidade e clareza:

1. Análise de Variação: Identificação das dimensões de variação:
2. Abstração: Os dados e as funcionalidades do Material.
3. Implementação: Os diversos formatos de arquivo (PDF, TXT).
4. Modelagem da Hierarquia do Implementador: Criação da interface GeradorDeArquivo e suas implementações concretas (GeradorPDF, GeradorTXT), isolando toda a lógica de formatação de baixo nível.
5. Modelagem da Hierarquia da Abstração: Definição da classe base Material e da sua especialização MaterialDidatico (Refined Abstraction), que é o ponto de interação do Cliente. A chave é a inclusão da Composição: a classe Material recebe uma referência à interface GeradorDeArquivo.
6. Desenho UML: Formalização da estrutura e das relações (Composição e Realização/Implementação) no diagrama de classes utilizando draw.io, validando a conformidade com o padrão Bridge.
7. Documentação: Redação do detalhamento técnico, justificando como o Bridge resolve o acoplamento e potencializa a manutenibilidade do módulo de exportação.

-----

## Desenvolvimento

O processo de implementação do padrão Bridge no módulo de gestão de materiais didáticos seguiu uma abordagem estruturada, fundamentada em princípios de design de software e validação prática. O objetivo foi garantir o desacoplamento eficiente entre a lógica de manipulação do conteúdo e o mecanismo de exportação.

Abaixo estão as etapas de desenvolvimento, que foram desde a conceituação teórica até a consolidação da documentação:
1. Fundamentação Teórica:
    - O desenvolvimento foi iniciado com um estudo aprofundado do padrão Bridge, utilizando como referências primárias a obra Design Patterns: Elements of Reusable Object-Oriented Software (GoF) e o material didático fornecido pela professora no aprender.
    - Esta fase foi crucial para compreender a distinção entre Abstração e Implementação, e a importância da Composição sobre a Herança na resolução do problema de explosão de classes.

2. Modelagem e Design UML:
    - Com a compreensão teórica estabelecida, o cenário de geração de arquivos foi formalmente decomposto. A Abstração (o Material) foi separada da Implementação (o GeradorDeArquivo).
    - O diagrama UML, elaborado na plataforma Draw.io, detalhou a estrutura: a hierarquia de Material (Abstração) utiliza a Composição para referenciar a interface GeradorDeArquivo (Implementador), que é implementada pelas classes concretas GeradorPDF e GeradorTXT.

3. Implementação do Código:
    -  A codificação foi realizada no ambiente Visual Studio Code (VSCode).

4. Validação Prática:
    - A funcionalidade foi submetida a testes para garantir a correta aplicação do padrão. Foi verificado se o Monitor conseguia trocar o formato de geração (PDF para TXT) de um mesmo objeto Material em tempo de execução, validando a flexibilidade central do Bridge.
    - Os resultados e a prova da funcionalidade foram documentados e compartilhados em vídeos no YouTube, servindo como evidência da correta implementação.

5. Documentação e Consolidação:
    - Toda a documentação técnica do projeto, incluindo este relatório, foi desenvolvida no Docsify. Este processo colaborativo garantiu que os aprendizados teóricos e a lógica implementada fossem consolidados de forma clara e acessível, completando o ciclo de desenvolvimento.

Essa metodologia, que une referências com a aplicação prática em um framework, assegurou a organização do projeto, a clareza na comunicação das decisões e a validação da implementação do padrão Bridge.

-----

## Diagrama

<font size="2"><p style="text-align: center"><b>Figura 1 - Diagrama Bridge</b></p></font>

<center>

![imagem](../images/DiagramaBridge.png)

</center>

<font size="2"><p style="text-align: center"><b>Autores: Anne de Capdeville e Bruno Cruz, 2025.</b></p></font>


-----

### Código

#### GeradorDeArquivo

```
public interface GeradorDeArquivo {
    void salvar(String dados);
}

```
#### GeradorPDF

```
public class GeradorPDF implements GeradorDeArquivo {
    @Override
    public void salvar(String dados) {
        System.out.println("Implementador PDF: Formatando e salvando dados como PDF (simulado)...");
        System.out.println("--- PDF FORMATADO ---");
        System.out.println(dados.toUpperCase());
    }
}

```

#### GeradorTXT

```
public class GeradorTXT implements GeradorDeArquivo {
    @Override
    public void salvar(String dados) {
        System.out.println("Implementador TXT: Salvando dados como texto simples (.txt)...");
        System.out.println("\n--- CONTEUDO ---");
        System.out.println(dados);
    }
}

```

#### Monitor

```
public class Monitor {

    private final int monitorId;

    public Monitor(int monitorId) {
        this.monitorId = monitorId;
    }

    public void disponibilizarMaterialDeEstudo(int id, String titulo, String materia, GeradorDeArquivo formatoInicial) {
        System.out.println("\n[Monitor " + monitorId + "] Preparando Material de Estudo...");

        MaterialDidatico material = new MaterialDidatico(id, titulo, materia, formatoInicial);

        material.gerar();

        System.out.println("\n--- Trocando o formato em tempo de execucao (Bridge em Acao)... ---");

        GeradorDeArquivo novoFormato = (formatoInicial instanceof GeradorPDF) ? new GeradorTXT() : new GeradorPDF();

        material.setGerador(novoFormato);
        material.gerar();
    }
}

```

#### Material

```
import java.io.File;
import java.util.Date;

public abstract class Material {

    protected int id;
    protected String titulo;
    protected String materia;
    protected File arquivo;
    protected Date dataEnvio;

    // Ponte/Bridge para o Implementor
    protected GeradorDeArquivo implementor;

    public Material(int id, String titulo, String materia, GeradorDeArquivo implementor) {
        this.id = id;
        this.titulo = titulo;
        this.materia = materia;
        this.dataEnvio = new Date();
        this.arquivo = new File(titulo.replace(" ", "_") + ".tmp");

        this.implementor = implementor;
    }

    public void setGerador(GeradorDeArquivo implementor) {
        this.implementor = implementor;
    }

    public abstract void gerar();

    protected String getTitulo() {
        return titulo;
    }
}

```

#### MaterialDidatico

```
public class MaterialDidatico extends Material {

    private final String conteudoEstudo;

    public MaterialDidatico(int id, String titulo, String materia, GeradorDeArquivo implementor) {
        super(id, titulo, materia, implementor);

        this.conteudoEstudo = "Material de Estudo: " + this.titulo +
                "\nMatéria: " + this.materia +
                "\n\nInstrucoes: Este material contem conceitos chave e exemplos praticos para aprofundamento. Revise o conteudo antes da próxima sessao.";
    }

    @Override
    public void gerar() {
        System.out.println("\n--- Gerando Material Didatico: " + this.titulo + " ---");

        // invoca a implementacao (salvar como TXT ou PDF)
        this.implementor.salvar(this.conteudoEstudo);
    }
}

```

#### Aplicacao (Main)

```
public class Aplicacao {

    static void main() {
        System.out.println("==============================================");
        System.out.println("--- DEMONSTRACAO DO BRIDGE (GOF) ---");
        System.out.println(" (Foco: Material Didatico e Formatos de Arquivo)");
        System.out.println("==============================================");

        Monitor monitor = new Monitor(42);

        System.out.println("\n****** CENARIO 1: Conceitos de Prototype (TXT/PDF) ******");
        GeradorDeArquivo txtImplementor = new GeradorTXT();
        monitor.disponibilizarMaterialDeEstudo(
                101,
                "Conceitos de Padroes Criacionais",
                "Arquitetura de Software",
                txtImplementor
        );

        System.out.println("\n------------------------------------------------");

        System.out.println("\n****** CENARIO 2: Guia de UML (PDF/TXT) ******");
        GeradorDeArquivo pdfImplementor = new GeradorPDF();
        monitor.disponibilizarMaterialDeEstudo(
                202,
                "Guia Rapido de Diagramas UML",
                "Analise e Projeto",
                pdfImplementor
        );

        System.out.println("\n==============================================");
        System.out.println("FIM: A lógica do Material (Conteudo) está desacoplada do Gerador de Arquivo (Formato).");
    }
}
```


-----

## Histórico de Versões

| Versão | Data       | Descrição                          | Autor(es)                       | Revisor(es)        |
| :----- | :--------- | :--------------------------------- | :------------------------------ | :----------------- |
| 1.0    | 24/10/2025 | Criação da documentação            | Anne de Capdeville              | Bruno Cruz         |
| 1.1    | 24/10/2025 | Documentação e criação do diagrama | Anne de Capdeville e Bruno Cruz | Bruno Cruz         |
| 1.2    | 24/10/2025 | Adição dos códigos                 | Anne de Capdeville e Bruno Cruz | Anne de Capdeville |
